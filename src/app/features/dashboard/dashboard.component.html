<!-- ============================================================================
     MODERN DASHBOARD TEMPLATE
     Enhanced UI with gradients, shadows, and smooth animations
     ============================================================================ -->

<!-- Header con gradiente moderno -->
<mat-toolbar class="modern-toolbar">
  <div class="toolbar-content">
    <div class="toolbar-left">
      <mat-icon class="dashboard-icon">dashboard</mat-icon>
      <span class="title">Panel Administrativo</span>
      
    </div>
    
    <div class="toolbar-right">
      <button mat-button class="time-range-btn" [matMenuTriggerFor]="menuRango">
        <mat-icon>schedule</mat-icon>
        <span>{{ rango() | uppercase }}</span>
        <mat-icon class="dropdown-icon">expand_more</mat-icon>
      </button>
    </div>
  </div>

  <mat-menu #menuRango="matMenu" class="modern-menu">
    <button mat-menu-item (click)="rango.set('7d')">
      <mat-icon>calendar_today</mat-icon>
      <span>Últimos 7 días</span>
    </button>
    <button mat-menu-item (click)="rango.set('30d')">
      <mat-icon>date_range</mat-icon>
      <span>Últimos 30 días</span>
    </button>
    <button mat-menu-item (click)="rango.set('ytd')">
      <mat-icon>trending_up</mat-icon>
      <span>YTD</span>
    </button>
    <button mat-menu-item (click)="rango.set('12m')">
      <mat-icon>insights</mat-icon>
      <span>12 meses</span>
    </button>
  </mat-menu>
</mat-toolbar>

<div class="dashboard-container">
  <div class="inner">
  <!-- KPIs con diseño moderno -->
  <div class="kpi-section">
    <div class="section-header">
      <h2>Métricas Clave</h2>
      <span class="update-time">Actualizado hace 5 min</span>
    </div>
    
    <div class="kpi-grid">
      <mat-card class="kpi-card gradient-blue" *ngFor="let k of kpis; let i = index" 
                [class.animate-in]="true" 
                [style.animation-delay.ms]="i * 100">
        <div class="kpi-header">
          <div class="icon-wrapper">
            <mat-icon>{{ k.icon }}</mat-icon>
          </div>
          <span class="kpi-trend">
            <mat-icon class="trend-icon up">trending_up</mat-icon>
            <span class="trend-value">+12%</span>
          </span>
        </div>
        <div class="kpi-body">
          <div class="kpi-value">{{ k.value | number }}</div>
          <div class="kpi-label">{{ k.label }}</div>
        </div>
        <div class="kpi-footer">
          <span class="kpi-subtitle">vs. período anterior</span>
        </div>
      </mat-card>
    </div>
  </div>

  <!-- Gráficos principales -->
  <div class="charts-section">
    <div class="section-header">
      <h2>Análisis Visual</h2>
    </div>

    <div class="charts-grid-two">
      <mat-card class="chart-card elevated">
        <mat-card-header>
          <div class="card-title-wrapper">
            <mat-icon class="title-icon">show_chart</mat-icon>
            <mat-card-title>Evolución de Ventas</mat-card-title>
          </div>
          <button mat-icon-button class="card-menu">
            <mat-icon>more_vert</mat-icon>
          </button>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-wrapper">
            <canvas baseChart
                    [type]="lineChartType"
                    [data]="lineChartData"
                    [options]="lineChartOptions">
            </canvas>
          </div>
          <div class="chart-legend">
            <span class="legend-item">
              <span class="legend-dot blue"></span>
              Ventas totales
            </span>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="chart-card elevated">
        <mat-card-header>
          <div class="card-title-wrapper">
            <mat-icon class="title-icon">inventory_2</mat-icon>
            <mat-card-title>Inventario vs. Rotación</mat-card-title>
          </div>
          <button mat-icon-button class="card-menu">
            <mat-icon>more_vert</mat-icon>
          </button>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-wrapper">
            <canvas baseChart
                    [data]="mixChartData"
                    [options]="mixChartOptions">
            </canvas>
          </div>
          <div class="chart-legend">
            <span class="legend-item">
              <span class="legend-dot purple"></span>
              Stock disponible
            </span>
            <span class="legend-item">
              <span class="legend-dot orange"></span>
              Rotación
            </span>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Gráfico de dona -->
    <div class="charts-grid-single">
      <mat-card class="chart-card elevated wide">
        <mat-card-header>
          <div class="card-title-wrapper">
            <mat-icon class="title-icon">pie_chart</mat-icon>
            <mat-card-title>Distribución por Categoría</mat-card-title>
          </div>
          <button mat-icon-button class="card-menu">
            <mat-icon>more_vert</mat-icon>
          </button>
        </mat-card-header>
        <mat-card-content>
          <div class="chart-wrapper doughnut">
            <canvas baseChart
                    [type]="doughnutType"
                    [data]="doughnutData"
                    [options]="doughnutOptions">
            </canvas>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Tablas de datos -->
  <div class="tables-section">
    <div class="section-header">
      <h2>Detalles de Inventario</h2>
    </div>

    <div class="tables-grid">
      <mat-card class="table-card elevated">
        <mat-card-header>
          <div class="card-title-wrapper">
            <mat-icon class="title-icon success">stars</mat-icon>
            <mat-card-title>Top Productos</mat-card-title>
          </div>
          <button mat-button color="primary" class="action-btn">
            Ver todos
            <mat-icon>arrow_forward</mat-icon>
          </button>
        </mat-card-header>
        <mat-card-content>
          <div class="table-wrapper">
            <table mat-table [dataSource]="topProductos" class="modern-table">
              <ng-container matColumnDef="sku">
                <th mat-header-cell *matHeaderCellDef>
                  <span class="header-content">
                    <mat-icon class="header-icon">tag</mat-icon>
                    SKU
                  </span>
                </th>
                <td mat-cell *matCellDef="let e">
                  <span class="sku-badge">{{ e.sku }}</span>
                </td>
              </ng-container>
              
              <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef>
                  <span class="header-content">
                    <mat-icon class="header-icon">inventory</mat-icon>
                    Producto
                  </span>
                </th>
                <td mat-cell *matCellDef="let e">
                  <span class="product-name">{{ e.nombre }}</span>
                </td>
              </ng-container>
              
              <ng-container matColumnDef="stock">
                <th mat-header-cell *matHeaderCellDef>
                  <span class="header-content">
                    <mat-icon class="header-icon">storage</mat-icon>
                    Stock
                  </span>
                </th>
                <td mat-cell *matCellDef="let e">
                  <span class="stock-value success">{{ e.stock }}</span>
                </td>
              </ng-container>
              
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>
            </table>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="table-card elevated alert">
        <mat-card-header>
          <div class="card-title-wrapper">
            <mat-icon class="title-icon warning">warning</mat-icon>
            <mat-card-title>Reposiciones Pendientes</mat-card-title>
          </div>
          <span class="alert-badge">{{ pendientes.length }} alertas</span>
        </mat-card-header>
        <mat-card-content>
          <div class="table-wrapper">
            <table mat-table [dataSource]="pendientes" class="modern-table">
              <ng-container matColumnDef="sku">
                <th mat-header-cell *matHeaderCellDef>
                  <span class="header-content">
                    <mat-icon class="header-icon">tag</mat-icon>
                    SKU
                  </span>
                </th>
                <td mat-cell *matCellDef="let e">
                  <span class="sku-badge warning">{{ e.sku }}</span>
                </td>
              </ng-container>
              
              <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef>
                  <span class="header-content">
                    <mat-icon class="header-icon">inventory</mat-icon>
                    Producto
                  </span>
                </th>
                <td mat-cell *matCellDef="let e">
                  <span class="product-name">{{ e.nombre }}</span>
                </td>
              </ng-container>
              
              <ng-container matColumnDef="minimo">
                <th mat-header-cell *matHeaderCellDef>
                  <span class="header-content">
                    <mat-icon class="header-icon">priority_high</mat-icon>
                    Mín.
                  </span>
                </th>
                <td mat-cell *matCellDef="let e">
                  <span class="stock-value">{{ e.minimo }}</span>
                </td>
              </ng-container>
              
              <ng-container matColumnDef="actual">
                <th mat-header-cell *matHeaderCellDef>
                  <span class="header-content">
                    <mat-icon class="header-icon">inventory_2</mat-icon>
                    Actual
                  </span>
                </th>
                <td mat-cell *matCellDef="let e">
                  <span class="stock-value danger">{{ e.actual }}</span>
                </td>
              </ng-container>
              
              <tr mat-header-row *matHeaderRowDef="displayedColumnsPend"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumnsPend;" class="table-row"></tr>
            </table>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
    </div> 
</div>

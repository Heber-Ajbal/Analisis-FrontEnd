<!-- Hero + buscador (full-bleed) -->
<section class="w-full bg-gradient-to-br from-gray-50 to-white">
  <div
    class="w-full px-4 md:px-6 py-8 md:py-12 grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-10 items-center"
  >
    <div class="lg:col-span-7">
      <h1 class="text-3xl md:text-5xl font-extrabold tracking-tight">
        Todo para tu auto y moto, <span class="text-primary-600">en un solo lugar</span>
      </h1>
      <p class="mt-4 text-gray-600">
        Autopartes, lubricantes y suministros. Inventario en tiempo real y retiro en tienda cercana.
      </p>

      <!-- ⬇️ Buscador: input pill + botón integrado -->
      <!-- Buscador: pill con icono y botón, alineado -->
      <div class="mt-6">
        <form class="flex flex-col sm:flex-row items-stretch gap-2">
          <!-- Wrapper del input -->
          <div class="relative flex-1">
            <span class="pointer-events-none absolute inset-y-0 left-3 flex items-center">
              <mat-icon class="text-gray-400">search</mat-icon>
            </span>

            <input
              type="search"
              [formControl]="query"
              placeholder="Buscar autopartes, marcas o códigos OEM…"
              aria-label="Buscar producto o categoría"
              class="h-12 w-full rounded-full border border-gray-300 bg-white pl-12 pr-4 outline-none shadow-sm focus:ring-2 focus:ring-primary-200 focus:border-primary-300 transition"
            />
          </div>

          <button type="submit" mat-flat-button color="primary" class="h-12 rounded-full px-6">
            Buscar
          </button>
        </form>
      </div>
    </div>

    <div class="lg:col-span-5 rounded-2xl overflow-hidden shadow">
      <img
        class="w-full h-48 md:h-64 lg:h-72 object-cover"
        src="https://picsum.photos/seed/garage/1200/600"
        alt="Hero"
      />
    </div>
  </div>
</section>

<!-- Categorías (full-bleed) -->
<section class="w-full px-4 md:px-6 py-8">
  <div class="flex items-center justify-between">
    <h2 class="text-xl md:text-2xl font-bold">Categorías populares</h2>
    <a routerLink="/catalogo" class="text-primary-600 hover:underline text-sm">Ver todo</a>
  </div>

  <div class="mt-6 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4">
    <a
      *ngFor="let c of categories"
      [routerLink]="['/catalogo', c.slug]"
      class="group border rounded-2xl p-4 hover:shadow transition flex flex-col items-center gap-2"
    >
      <mat-icon class="text-3xl">{{ c.icon }}</mat-icon>
      <span class="font-medium">{{ c.label }}</span>
      <span class="text-xs text-gray-500 group-hover:text-gray-700">Explorar</span>
    </a>
  </div>
</section>

<!-- Promociones (carousel) -->
<section class="w-full px-4 md:px-6 py-6">
  <div class="flex overflow-x-auto gap-4 snap-x snap-mandatory">
    <a
      *ngFor="let p of promotions"
      [routerLink]="p.href"
      class="min-w-[90%] sm:min-w-[48%] snap-start rounded-2xl overflow-hidden border hover:shadow transition"
    >
      <div class="relative">
        <img [src]="p.image" alt="" class="w-full h-52 md:h-56 object-cover" />
        <div class="absolute inset-0 bg-black/30"></div>
        <div class="absolute inset-0 p-4 md:p-6 text-white flex flex-col justify-end">
          <div class="text-lg md:text-xl font-semibold">{{ p.title }}</div>
          <div class="text-sm md:text-base">{{ p.subtitle }}</div>
          <button mat-stroked-button color="primary" class="mt-3 self-start">{{ p.cta }}</button>
        </div>
      </div>
    </a>
  </div>
</section>

<!-- Productos destacados -->
<section class="w-full px-4 md:px-6 py-8">
  <div class="flex items-center justify-between">
    <h2 class="text-xl md:text-2xl font-bold">Productos destacados</h2>
    <a routerLink="/catalogo" class="text-primary-600 hover:underline text-sm">Ver catálogo</a>
  </div>

  <div class="mt-6 grid gap-4 grid-cols-1 sm:grid-cols-2 xl:grid-cols-4">
    <mat-card *ngFor="let p of filteredFeatured" class="rounded-2xl overflow-hidden">
      <img mat-card-image [src]="p.image" [alt]="p.name" class="h-40 md:h-44 object-cover" />
      <mat-card-content>
        <div class="flex items-center justify-between mt-2">
          <h3 class="font-semibold line-clamp-2">{{ p.name }}</h3>
          <span *ngIf="p.badge" class="text-xs px-2 py-1 rounded-full bg-gray-100">{{
            p.badge
          }}</span>
        </div>
        <div class="mt-2 text-lg font-bold">{{ price(p.price) }}</div>
        <div class="mt-1 flex items-center gap-1 text-yellow-600">
          <mat-icon *ngFor="let _ of stars(p.rating)">star</mat-icon>
          <span class="text-xs text-gray-500 ml-1">{{ p.rating }}</span>
        </div>
      </mat-card-content>
      <mat-card-actions class="p-4 pt-0">
        <button mat-raised-button color="primary" class="w-full" (click)="addToCart(p)">
          Añadir al carrito
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</section>

<!-- Tiendas cercanas -->
<section class="w-full px-4 md:px-6 py-8">
  <div class="flex items-center justify-between">
    <h2 class="text-xl md:text-2xl font-bold">Tiendas cercanas</h2>
    <button mat-stroked-button color="primary" (click)="useMyLocation()" [disabled]="usingLocation">
      <mat-icon class="mr-1">my_location</mat-icon>
      {{ usingLocation ? 'Buscando...' : 'Usar mi ubicación' }}
    </button>
  </div>

  <div class="mt-4 grid gap-4 grid-cols-1 md:grid-cols-3">
    <div *ngFor="let s of nearby" class="border rounded-2xl p-4 hover:shadow transition">
      <div class="flex items-center gap-2">
        <mat-icon>storefront</mat-icon>
        <div class="font-semibold">{{ s.name }}</div>
      </div>
      <div class="text-sm text-gray-600 mt-1">{{ s.address }}</div>
      <div class="text-sm mt-2" *ngIf="s.distanceKm === s.distanceKm">
        A {{ s.distanceKm }} km de ti
      </div>
      <div class="mt-3 flex gap-2">
        <button mat-button color="primary">Ver inventario</button>
        <button mat-button>Cómo llegar</button>
      </div>
    </div>
  </div>
</section>


<!-- Footer -->
<footer class="border-t">
  <div
    class="w-full px-4 md:px-6 py-8 text-sm text-gray-600 flex flex-col md:flex-row items-center justify-between gap-2"
  >
    <div>© {{ currentYear }} AutoMarket</div>
    <div class="flex gap-4">
      <a class="hover:underline" routerLink="/legal/terminos">Términos</a>
      <a class="hover:underline" routerLink="/legal/privacidad">Privacidad</a>
      <a class="hover:underline" routerLink="/contacto">Contacto</a>
    </div>
  </div>
</footer>

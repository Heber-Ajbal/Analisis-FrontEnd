<mat-sidenav-container class="shell">

  <mat-sidenav
    mode="side"
    opened
    class="sidenav"
    [style.width.px]="collapsed ? 72 : 240">

    <div class="menu" [class.collapsed]="collapsed">

      <div class="collapse-row" [class.collapsed]="collapsed">
        <button
          mat-icon-button
          class="collapse-btn"
          (click)="toggle()"
          [attr.aria-expanded]="!collapsed"
          [matTooltip]="collapsed ? 'Expandir menú' : 'Contraer menú'">
          <mat-icon>{{ collapsed ? 'chevron_right' : 'chevron_left' }}</mat-icon>
        </button>
        <span class="collapse-text" [class.hide]="collapsed">APP</span>
      </div>

      <a class="menu-item" matRipple routerLink="/home" routerLinkActive="active"
         [matTooltip]="collapsed ? 'Inicio' : ''" matTooltipPosition="right">
        <mat-icon>home</mat-icon>
        <span class="label">Inicio</span>
      </a>

      <a class="menu-item" matRipple routerLink="/revision" routerLinkActive="active"
         [matTooltip]="collapsed ? 'Buscar' : ''" matTooltipPosition="right">
        <mat-icon>search</mat-icon>
        <span class="label">Buscar</span>
      </a>

      <a class="menu-item" matRipple routerLink="/admin" routerLinkActive="active"
         [matTooltip]="collapsed ? 'Alertas' : ''" matTooltipPosition="right">
        <mat-icon>notifications</mat-icon>
        <span class="label">Alertas</span>
      </a>

      <div class="divider"></div>

      <!-- Mostrar SOLO si NO está logueado -->
      <ng-container *ngIf="!loggedIn">
        <a class="menu-item" matRipple routerLink="/login" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Login' : ''" matTooltipPosition="right">
          <mat-icon>login</mat-icon>
          <span class="label">Login</span>
        </a>

        <a class="menu-item" matRipple routerLink="/registro" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Registro' : ''" matTooltipPosition="right">
          <mat-icon>person_add</mat-icon>
          <span class="label">Registro</span>
        </a>
      </ng-container>

      <ng-container *ngIf="loggedIn">
        <a class="menu-item" matRipple routerLink="/dashboard" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Dashboard' : ''" matTooltipPosition="right">
          <mat-icon>dashboard</mat-icon>
          <span class="label">Dashboard</span>
        </a>

        <a class="menu-item" matRipple routerLink="/inventario" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Inventario' : ''" matTooltipPosition="right">
          <mat-icon>inventory_2</mat-icon>
          <span class="label">Inventario</span>
        </a>
      </ng-container>

      <div class="spacer"></div>

      <!-- Perfil y Logout: SOLO si está logueado -->
      <a *ngIf="loggedIn" class="menu-item" matRipple routerLink="/perfil" routerLinkActive="active"
         [matTooltip]="collapsed ? 'Perfil' : ''" matTooltipPosition="right">
        <mat-icon>person</mat-icon>
        <span class="label">Perfil</span>
      </a>

      <button *ngIf="loggedIn" type="button" class="menu-item" matRipple
              [matTooltip]="collapsed ? 'Cerrar sesión' : ''" matTooltipPosition="right"
              (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span class="label">Cerrar sesión</span>
      </button>

    </div>
  </mat-sidenav>

  <mat-sidenav-content class="content">
    <div class="page">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>

<mat-sidenav-container class="shell">

  <!-- TOPBAR -->
  <mat-toolbar color="primary" class="topbar">
    <button mat-icon-button (click)="drawer.toggle()" *ngIf="(isHandset$ | async)">
      <mat-icon>menu</mat-icon>
    </button>

    <span class="brand">APP</span>
    <span class="spacer"></span>

    <button *ngIf="loggedIn" mat-button routerLink="/perfil">
      <mat-icon>person</mat-icon>
      <span class="hide-handset">Perfil</span>
    </button>
    <button *ngIf="loggedIn" mat-button (click)="logout()">
      <mat-icon>logout</mat-icon>
      <span class="hide-handset">Salir</span>
    </button>
    <button *ngIf="!loggedIn" mat-stroked-button routerLink="/login">
      <mat-icon>login</mat-icon>
      <span class="hide-handset">Ingresar</span>
    </button>
  </mat-toolbar>

  <!-- SIDENAV -->
  <mat-sidenav
    #drawer
    class="sidenav"
    [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [opened]="(isHandset$ | async) ? false : true"
    [fixedInViewport]="(isHandset$ | async)"
    [fixedTopGap]="64"
    [style.width.px]="collapsed ? 72 : 240">

    <div class="menu" [class.collapsed]="collapsed">

      <!-- fila de colapso -->
      <div class="collapse-row" [class.collapsed]="collapsed">
        <button
          mat-icon-button
          class="collapse-btn"
          (click)="toggle()"
          [attr.aria-expanded]="!collapsed"
          [matTooltip]="collapsed ? 'Expandir men√∫' : ''"
          [matTooltipDisabled]="!collapsed">
          <mat-icon>{{ collapsed ? 'chevron_right' : 'chevron_left' }}</mat-icon>
        </button>
        <span class="collapse-text" [class.hide]="collapsed">APP</span>
      </div>

      <!-- navegaci√≥n -->
      <a class="menu-item" matRipple routerLink="/home"
         routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}"
         [matTooltip]="collapsed ? 'Inicio' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
        <mat-icon>home</mat-icon>
        <span class="label" [class.hide]="collapsed">Inicio</span>
      </a>

      <!-- üîß Buscar -> /catalogo -->
      <a class="menu-item" matRipple routerLink="/catalogo" routerLinkActive="active"
         [matTooltip]="collapsed ? 'Buscar' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
        <mat-icon>search</mat-icon>
        <span class="label" [class.hide]="collapsed">Buscar</span>
      </a>

      <a class="menu-item" matRipple routerLink="/carrito" routerLinkActive="active"
         [matTooltip]="collapsed ? 'Carrito' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
        <mat-icon>shopping_cart</mat-icon>
        <span class="label" [class.hide]="collapsed">Carrito</span>
      </a>

      <a class="menu-item" matRipple routerLink="/admin" routerLinkActive="active"
         [matTooltip]="collapsed ? 'Alertas' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
        <mat-icon>notifications</mat-icon>
        <span class="label" [class.hide]="collapsed">Alertas</span>
      </a>

      <div class="divider"></div>

      <!-- NO logueado -->
      <ng-container *ngIf="!loggedIn">
        <a class="menu-item" matRipple routerLink="/login" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Login' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
          <mat-icon>login</mat-icon>
          <span class="label" [class.hide]="collapsed">Login</span>
        </a>

        <a class="menu-item" matRipple routerLink="/registro" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Registro' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
          <mat-icon>person_add</mat-icon>
          <span class="label" [class.hide]="collapsed">Registro</span>
        </a>
      </ng-container>

      <!-- S√ç logueado -->
      <ng-container *ngIf="loggedIn">
        <a class="menu-item" matRipple routerLink="/dashboard" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Dashboard' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
          <mat-icon>dashboard</mat-icon>
          <span class="label" [class.hide]="collapsed">Dashboard</span>
        </a>

        <a class="menu-item" matRipple routerLink="/inventario" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Inventario' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
          <mat-icon>inventory_2</mat-icon>
          <span class="label" [class.hide]="collapsed">Inventario</span>
        </a>

        <a class="menu-item" matRipple routerLink="/publicidad" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Publicidad' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
          <mat-icon>campaign</mat-icon>
          <span class="label" [class.hide]="collapsed">Publicidad</span>
        </a>

        <a class="menu-item" matRipple routerLink="/compras" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Compras' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
          <mat-icon>shopping_bag</mat-icon>
          <span class="label" [class.hide]="collapsed">Compras</span>
        </a>

        <a class="menu-item" matRipple routerLink="/usuarios" routerLinkActive="active"
           [matTooltip]="collapsed ? 'Usuarios' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
          <mat-icon>person</mat-icon>
          <span class="label" [class.hide]="collapsed">Usuario</span>
        </a>
      </ng-container>

      <div class="spacer"></div>

      <!-- Pie -->
      <a *ngIf="loggedIn" class="menu-item" matRipple routerLink="/perfil" routerLinkActive="active"
         [matTooltip]="collapsed ? 'Perfil' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right">
        <mat-icon>person</mat-icon>
        <span class="label" [class.hide]="collapsed">Perfil</span>
      </a>

      <button *ngIf="loggedIn" type="button" class="menu-item" matRipple
              [matTooltip]="collapsed ? 'Cerrar sesi√≥n' : ''" [matTooltipDisabled]="!collapsed" matTooltipPosition="right"
              (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span class="label" [class.hide]="collapsed">Cerrar sesi√≥n</span>
      </button>

    </div>
  </mat-sidenav>

  <!-- CONTENIDO -->
  <mat-sidenav-content class="content">
    <div class="page">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>

</mat-sidenav-container>
